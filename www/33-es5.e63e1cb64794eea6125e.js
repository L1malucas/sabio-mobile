function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new M(o||[]);return r(a,"_invoke",{value:D(t,n,c)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",f="executing",b="completed",g={};function p(){}function v(){}function m(){}var O={};u(O,a,(function(){return this}));var C=Object.getPrototypeOf,_=C&&C(C(E([])));_&&_!==n&&o.call(_,a)&&(O=_);var y=m.prototype=p.prototype=Object.create(O);function A(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(r,i,a,c){var s=d(t[r],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&o.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(t,o){function r(){return new e((function(e,r){n(t,o,e,r)}))}return i=i?i.then(r,r):r()}})}function D(e,n,o){var r=h;return function(i,a){if(r===f)throw new Error("Generator is already running");if(r===b){if("throw"===i)throw a;return{value:t,done:!0}}for(o.method=i,o.arg=a;;){var c=o.delegate;if(c){var s=P(c,o);if(s){if(s===g)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===h)throw r=b,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=f;var u=d(e,n,o);if("normal"===u.type){if(r=o.done?b:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(r=b,o.method="throw",o.arg=u.arg)}}}function P(e,n){var o=n.method,r=e.iterator[o];if(r===t)return n.delegate=null,"throw"===o&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),g;var i=d(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return v.prototype=m,r(y,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},e.awrap=function(t){return{__await:t}},A(I.prototype),u(I.prototype,c,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,o,r,i){void 0===i&&(i=Promise);var a=new I(l(t,n,o,r),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},A(y),u(y,s,"Generator"),u(y,a,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},e.values=E,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(o,r){return c.type="throw",c.arg=e,n.next=o,r&&(n.method="next",n.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:E(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),g}},e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==typeof e?e:String(e)}function _toPrimitive(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{yDS4:function(t,e,n){"use strict";n.r(e),n.d(e,"AcademicoAulaEditarPageModule",(function(){return k}));var o=n("ofXK"),r=n("3Pt+"),i=n("TEn/"),a=n("tyNb"),c=n("mrSG"),s=n("amDQ"),u=n("wd/R"),l=n("fXoL"),d=n("afdR"),h=n("g8ne"),f=n("h1Pb"),b=n("cI5j");function g(t,e){1&t&&(l.Ob(0),l.Mb(1,"ion-spinner",14),l.Nb())}function p(t,e){if(1&t&&(l.Ob(0),l.Qb(1,"ion-item",18),l.Qb(2,"ion-label",19),l.Qb(3,"h2"),l.Cc(4),l.Pb(),l.Pb(),l.Mb(5,"ion-radio",20),l.Pb(),l.Nb()),2&t){var n=e.$implicit,o=l.bc(3);l.zb(4),l.Dc(o.cub3Svc.normalizeString(n.DES_AVALIACAO)),l.zb(1),l.hc("value",n.NRO_AVALIACAO)}}function v(t,e){if(1&t){var n=l.Rb();l.Qb(0,"ion-radio-group",16),l.Yb("ngModelChange",(function(t){return l.sc(n),l.bc(2).getConteudos(t)}))("ngModelChange",(function(t){return l.sc(n),l.bc(2).dados.NRO_AVALIACAO=t})),l.Ac(1,p,6,2,"ng-container",17),l.Pb()}if(2&t){var o=l.bc(2);l.hc("ngModel",o.dados.NRO_AVALIACAO),l.zb(1),l.hc("ngForOf",o.turmaAtiva.etapa.avaliacoes)}}function m(t,e){if(1&t&&(l.Qb(0,"small"),l.Cc(1,"Para continuar, por gentileza, selecione o per\xedodo:"),l.Pb(),l.Qb(2,"ion-label"),l.Cc(3,"Per\xedodo"),l.Pb(),l.Ac(4,v,2,2,"ion-radio-group",15)),2&t){var n=l.bc();l.zb(4),l.hc("ngIf",null==n.turmaAtiva||null==n.turmaAtiva.etapa?null:n.turmaAtiva.etapa.avaliacoes)}}function O(t,e){1&t&&(l.Ob(0),l.Mb(1,"ion-spinner",14),l.Nb())}function C(t,e){if(1&t&&(l.Ob(0),l.Cc(1),l.Nb()),2&t){var n=l.bc().$implicit;l.zb(1),l.Ec("",n.SEQ_CONTEUDO,")")}}function _(t,e){if(1&t&&(l.Qb(0,"p"),l.Cc(1),l.Pb()),2&t){var n=l.bc().$implicit;l.zb(1),l.Dc(n.DES_CONTEUDO)}}function y(t,e){if(1&t&&(l.Qb(0,"p",34),l.Cc(1),l.Pb()),2&t){var n=l.bc().$implicit;l.zb(1),l.Dc(n.DES_CONTEUDO)}}function A(t,e){if(1&t){var n=l.Rb();l.Ob(0),l.Qb(1,"ion-card",26),l.Qb(2,"ion-card-content",27),l.Qb(3,"ion-item",28),l.Qb(4,"ion-label",29),l.Qb(5,"h2",30),l.Ac(6,C,2,1,"ng-container",6),l.Cc(7),l.Pb(),l.Ac(8,_,2,1,"p",4),l.Ac(9,y,2,1,"ng-template",null,31,l.Bc),l.Qb(11,"ion-chip",32),l.Cc(12),l.Pb(),l.Qb(13,"ion-chip",32),l.Cc(14),l.Pb(),l.Pb(),l.Qb(15,"ion-checkbox",33),l.Yb("ngModelChange",(function(t){return l.sc(n),e.$implicit.selecionado=t}))("ionChange",(function(){l.sc(n);var t=e.$implicit;return l.bc(3).selecionarConteudo(t)})),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Nb()}if(2&t){var o=e.$implicit,r=l.rc(10),i=l.bc(3);l.zb(6),l.hc("ngIf",o.SEQ_CONTEUDO),l.zb(1),l.Ec("",o.COD_BNCC||"Conte\xfado"," "),l.zb(1),l.hc("ngIf",!o.selecionado)("ngIfElse",r),l.zb(4),l.Dc(i.cub3Svc.normalizeString(o.DES_DISCIPLINA)),l.zb(2),l.Ec("",o.NRO_HORAAULA," minutos"),l.zb(1),l.hc("ngModel",o.selecionado)}}function I(t,e){if(1&t){var n=l.Rb();l.Qb(0,"small"),l.Cc(1,"Para continuar, por gentileza, utilize a pesquisa abaixo para filtrar o conte\xfado desejado:"),l.Pb(),l.Qb(2,"ion-searchbar",22),l.Yb("ngModelChange",(function(t){return l.sc(n),l.bc(2).busca=t})),l.Pb(),l.Qb(3,"ion-list",23),l.Ac(4,A,16,7,"ng-container",17),l.Qb(5,"ion-infinite-scroll",24),l.Yb("ionInfinite",(function(t){return l.sc(n),l.bc(2).loadData(t)})),l.Mb(6,"ion-infinite-scroll-content",25),l.Pb(),l.Pb()}if(2&t){var o=l.bc(2);l.zb(2),l.hc("ngModel",o.busca),l.zb(1),l.hc("hidden",1!=o.activeSlideIndex),l.zb(1),l.hc("ngForOf",o.listaParcial)}}function D(t,e){if(1&t&&(l.Qb(0,"ion-slide"),l.Qb(1,"h2",3),l.Cc(2,"Sele\xe7\xe3o de conte\xfado program\xe1tico"),l.Pb(),l.Ac(3,O,2,0,"ng-container",4),l.Ac(4,I,7,3,"ng-template",null,21,l.Bc),l.Pb()),2&t){var n=l.rc(5),o=l.bc();l.zb(3),l.hc("ngIf",o.carregandoConteudos)("ngIfElse",n)}}var P,w,S,M=[{path:"",component:(P=function(){function t(e,n,o,r,i,a,c,s,u){_classCallCheck(this,t),this.cub3Svc=e,this.location=n,this.navCtrl=o,this.alertController=r,this.cd=i,this.cub3Db=a,this.selector=c,this.route=s,this.router=u,this.turmaAtiva={NME_TURMA:""},this.dados={IDF_AULA:"",DAT_AULA:"",IDF_TURMA:"",IDF_PROFISSIONAL:"",NRO_AVALIACAO:"",IDF_DISCIPLINA:"",DES_ASSUNTO:"",OBSERVACAO:"",SIT_REGISTRO:"",IDF_CONTEUDOS:[]},this.data={MOB_DISCIPLINAS:[],MOB_PLAULA:[]},this.carregando=!0,this.carregandoConteudos=!1,this.wizard=1,this.activeSlideIndex=0,this.conteudos=[],this.listaParcial=[],this.totalItens=0,this.quantidadePorPagina=10,this.busca="",this.mesesCal=["Jan","Fev","Mar","Abr","Jun","Jul","Ago","Set","Out","Nov","Dez"],this.diasCal=["S","T","Q","Q","S","S","D"],this.jsonData={duracao:[]},this.etapa=1,this.handleScroll=function(){var t=document.querySelector("ion-slides");t&&t.scrollIntoView({behavior:"smooth"})}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.init(),this.route.url.subscribe((function(){var e=t.route.snapshot.params.id;e&&"undefined"!==e?(t.dados.IDF_AULA=e,t.getAula()):t.location.back()})),window.addEventListener("scroll",this.handleScroll)}},{key:"ngOnDestroy",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"onSlideDidChange",value:function(t){var e=this;this.slides.getActiveIndex().then((function(t){e.activeSlideIndex=t,e.cd.markForCheck()}))}},{key:"init",value:function(){return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.usuario=s.a.getAccount();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getAula",value:function(){return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var e,n,o=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.carregando=!0,this.data=s.a.getItem("data"),this.data.MOB_DISCIPLINAS=[],this.carregando=!0,t.prev=1,t.next=4,this.cub3Svc.getTurmas();case 4:return e=t.sent,console.log("Turmas",e),t.next=8,this.cub3Db.getStorage("MOB_REGISTRO_AULA");case 8:return n=t.sent,this.dados=n.find((function(t){return parseInt(t.IDF_AULA)===parseInt(o.dados.IDF_AULA)})),console.log("Aula",this.dados),this.cd.markForCheck(),console.log("Aula carregada",[this.dados,this.conteudos]),t.next=15,this.getDisciplinas();case 15:this.carregando=!1,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),console.error("Erro ao obter aula:",t.t0),this.carregando=!1;case 21:case"end":return t.stop()}}),t,this,[[1,18]])})))}},{key:"getDisciplinas",value:function(){return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var e,n=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.cub3Svc.getTurmas();case 3:e=t.sent.find((function(t){return parseInt(t.id)===parseInt(n.dados.IDF_TURMA)})),this.turmaAtiva=e,console.log("Turma",e),this.data.MOB_DISCIPLINAS=(null==e?void 0:e.disciplinas)||[],t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Erro ao obter disciplinas:",t.t0),this.data.MOB_DISCIPLINAS=[];case 10:this.cd.markForCheck();case 11:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"submit",value:function(){return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var e,n,o,r,i,a,c,s,l,d,h,f,b,g,p,v,m,O,C=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[{id:"DES_ASSUNTO",label:"Conte\xfado"}],this.data.MOB_DISCIPLINAS.length>0&&e.push({id:"IDF_DISCIPLINA",label:"Disciplina"}),n=[],o=0,r=e;o<r.length;o++)i=r[o],this.dados[i.id]&&""!==this.dados[i.id]||n.push(i.label);if(!(n.length>0)){t.next=9;break}a=n.join(", "),this.cub3Svc.alerta("Ops!","Campo(s) obrigat\xf3rio(s): <b>".concat(a,"</b>")),t.next=39;break;case 9:if(c=this.dados.CONTEUDOS,console.log("CONT",c),s="",l=1,c&&c.length>0){d=_createForOfIteratorHelper(c);try{for(d.s();!(h=d.n()).done;)(f=h.value).DURACAO?(s+="".concat(f.IDF_CONTEUDO,"|").concat(f.DURACAO),l<c.length&&(s+=",")):(s+=f.IDF_CONTEUDO,l<c.length&&(s+=",")),l++}catch(_){d.e(_)}finally{d.f()}}if(this.dados.IDF_CONTEUDO=s,delete(b=Object.assign({},this.dados)).CONTEUDOS,b.NRO_AVALIACAO=parseInt(b.NRO_AVALIACAO),console.log(b),""===b.DES_ASSUNTO){t.next=38;break}return t.next=18,this.cub3Svc.carregar(1);case 18:return g=t.sent,t.prev=19,t.next=22,this.cub3Db.getStorage("MOB_REGISTRO_AULA");case 22:return p=t.sent,m=(v=function(t){return"".concat(u.utc(t.DAT_AULA).format("YYYY-MM-DD"),"_").concat(t.IDF_TURMA,"_").concat(t.IDF_PROFISSIONAL,"_").concat(t.IDF_DISCIPLINA,"_").concat(t.HOR_INICIO,"_").concat(t.HOR_TERMINO)})(this.dados),-1!==(O=p.findIndex((function(t){return v(t)===m})))?(p[O]=this.dados,console.log("=== Aula localizada",this.dados)):p.push(this.dados),Array.isArray(this.dados.IDF_CONTEUDOS)&&(console.log("Adicionando conteudos",this.dados.IDF_CONTEUDOS),this.dados.IDF_CONTEUDOS=this.dados.IDF_CONTEUDOS.filter((function(t){return!1!==t.selecionado}))),t.next=30,this.cub3Db.setStorage("MOB_REGISTRO_AULA",p);case 30:this.cub3Svc.sincronizar("MOB_REGISTRO_AULA").then((function(){setTimeout((function(){g.dismiss(),C.navCtrl.pop(),C.exibirConfirmacaoAula()}),3500)}),(function(){setTimeout((function(){g.dismiss(),C.navCtrl.pop(),C.exibirConfirmacaoAula()}),500)})),t.next=36;break;case 33:t.prev=33,t.t0=t.catch(19),console.error("Erro ao submeter aula:",t.t0),g.dismiss();case 36:t.next=39;break;case 38:this.cub3Svc.alerta("Ocorreu um problema","Por favor, verifique a data de aula, disciplina e o assunto.");case 39:case"end":return t.stop()}}),t,this,[[19,33]])})))}},{key:"exibirConfirmacaoAula",value:function(){return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var e,n=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:"Registro de frequ\xeancia",message:"Deseja registrar a frequ\xeancia dos alunos?",buttons:[{text:"N\xe3o",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Sim",handler:function(){n.router.navigate(["/app/academico/academico-frequencia/".concat(n.turmaAtiva.id,"/").concat(n.dados.IDF_AULA)])}}]});case 2:return e=t.sent,t.next=5,e.present();case 5:this.cub3Svc.alerta("Registro de aula","Registro atualizado com sucesso!");case 6:case"end":return t.stop()}}),t,this)})))}},{key:"filtrar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.filter((function(t){return t.DES_CONTEUDO.toLowerCase().includes(e.toLowerCase())}))}},{key:"ListarConteudo",value:function(){return""!==this.busca?this.filtrar(this.conteudos,this.busca):this.conteudos}},{key:"carregarMaisConteudo",value:function(t){var e=this.listaParcial.length,n=e+this.quantidadePorPagina,o=this.ListarConteudo().slice(e,n);this.listaParcial=[].concat(_toConsumableArray(this.listaParcial),_toConsumableArray(o)),t&&(t.target.complete(),this.listaParcial.length>=this.totalItens&&(t.target.disabled=!0))}},{key:"loadData",value:function(t){this.carregarMaisConteudo(t)}},{key:"getConteudos",value:function(t){var e,n,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function r(){var i,a,c,s,u,l,d,h=this;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Buscando conteudo",t),this.conteudos=[],r.prev=1,r.next=4,this.cub3Svc.getTurmas();case 4:if(i=r.sent.find((function(t){return parseInt(t.id)===parseInt(h.dados.IDF_TURMA)})),a=(null===(e=i.etapa)||void 0===e?void 0:e.avaliacoes.find((function(t){return t.NRO_AVALIACAO===h.dados.NRO_AVALIACAO}))).SEQ_AVALIACAO,this.carregandoConteudos=!0,this.cd.markForCheck(),console.log("Turma",i),c=i.disciplinas.find((function(t){return t.IDF_DISCIPLINA===h.dados.IDF_DISCIPLINA}))){r.next=10;break}return r.abrupt("return",(console.error("Disciplina n\xe3o encontrada."),this.carregandoConteudos=!1,void this.cd.markForCheck()));case 10:return r.next=12,this.cub3Svc.getNode("educanet/profissional/conteudoMobile?seq_avaliacao=".concat(a,"&idf_disciplina=").concat(c.IDF_INEP,"&idf_etapa=").concat(null===(n=i.etapa)||void 0===n?void 0:n.idfInep));case 12:s=r.sent,console.log("Verificando conteudos da aula",this.dados.IDF_CONTEUDOS),u=_createForOfIteratorHelper(s.dados),r.prev=15,d=_regeneratorRuntime().mark((function t(){var e,n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=l.value,Array.isArray(h.dados.IDF_CONTEUDOS)&&(n=h.dados.IDF_CONTEUDOS.find((function(t){return t.IDF_CONTEUDO===e.IDF_CONTEUDO})))&&(n.selecionado=!0,e.DURACAO=n.DURACAO,e.selecionado=!0),h.conteudos.some((function(t){return t.IDF_CONTEUDO===e.IDF_CONTEUDO}))||h.conteudos.push(e);case 3:case"end":return t.stop()}}),t)})),u.s();case 18:if((l=u.n()).done){r.next=22;break}return r.delegateYield(d(),"t0",20);case 20:r.next=18;break;case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(15),u.e(r.t1);case 27:return r.prev=27,u.f(),r.finish(27);case 30:r.next=35;break;case 32:r.prev=32,r.t2=r.catch(1),console.error("Erro ao carregar conte\xfados:",r.t2);case 35:return r.prev=35,this.carregandoConteudos=!1,this.totalItens=this.ListarConteudo().length,this.carregarMaisConteudo(),o&&this.avancar(),this.cd&&this.cd.markForCheck(),r.finish(35);case 38:case"end":return r.stop()}}),r,this,[[1,32,35,38],[15,24,27,30]])})))}},{key:"getDuracao",value:function(t){var e=0,n=function(n){var o=n.split("|");o[0]===t.IDF_CONTEUDO&&(e=parseInt(o[1]))};return this.dados.IDF_CONTEUDO.includes(",")?this.dados.IDF_CONTEUDO.split(",").forEach((function(o){o.includes("|")?n(o):o===t.IDF_CONTEUDO&&(e=0)})):this.dados.IDF_CONTEUDO.includes("|")?n(this.dados.IDF_CONTEUDO):this.dados.IDF_CONTEUDO===t.IDF_CONTEUDO&&(e=0),console.log(e),e}},{key:"atualizarConteudos",value:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.dados.CONTEUDOS=this.dados.IDF_CONTEUDOS.map((function(e){return t.data.CONTEUDOS.find((function(t){return t.IDF_CONTEUDO===e}))})).filter((function(t){return void 0!==t})).map((function(e){return Object.assign(Object.assign({},e),{DURACAO:t.getDuracao(e)})}))}},{key:"verificarTurma",value:function(t){return t.split(",").includes(this.turmaAtiva.IDF_TURMA)}},{key:"selecionarData",value:function(t){this.dados.DAT_AULA=u.utc(t),this.wizard=2}},{key:"selecionarDisciplina",value:function(t){this.dados.IDF_DISCIPLINA=t,this.getPlaula(),this.wizard=3}},{key:"selecionarPlanoAula",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t?(this.dados.IDF_PLAULA=t,this.dados.NRO_AVALIACAO=e,console.log(this.dados),this.getConteudos(),this.wizard=4):this.wizard=5}},{key:"voltar",value:function(){this.wizard=this.wizard>1?this.wizard-1:1}},{key:"selecionarDuracao",value:function(t){try{this.selector.show({title:"Dura\xe7\xe3o de apresenta\xe7\xe3o do conte\xfado:",items:[this.jsonData.duracao],positiveButtonText:"Selecionar",negativeButtonText:"Cancelar"}).then((function(e){t.DURACAO=parseInt(e[0].description.split(" ")[0])}),(function(t){return console.log("Error: ",t)}))}catch(e){console.log(e.message)}}},{key:"avancar",value:function(){return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var e=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.slides.length().then((function(t){return Object(c.a)(e,void 0,void 0,_regeneratorRuntime().mark((function e(){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slides.getActiveIndex();case 2:n=e.sent,e.t0=(console.log(n),console.log("currentIndex:",[n]),this.etapa=n+1,n),e.next=0===e.t0?6:10;break;case 6:return e.next=8,this.getConteudos(null,!1);case 8:return this.slides.slideNext().then((function(){window.scrollTo({top:0,behavior:"smooth"})})),e.abrupt("break",11);case 10:this.slides.slideNext().then((function(){window.scrollTo({top:0,behavior:"smooth"})}));case 11:this.etapa===t&&this.submit(),this.cd.markForCheck();case 12:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"selecionarConteudo",value:function(t){this.verificarConteudo(t)?this.dados.IDF_CONTEUDOS=this.dados.IDF_CONTEUDOS.filter((function(e){return e.IDF_CONTEUDO!==t.IDF_CONTEUDO})):this.dados.IDF_CONTEUDOS.push(t)}},{key:"verificarConteudo",value:function(t){return this.dados.IDF_CONTEUDOS.some((function(e){return e.IDF_CONTEUDO===t.IDF_CONTEUDO}))}},{key:"getPlaula",value:function(){return Object(c.a)(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var e,n=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.data.MOB_PLAULA=[],(e=s.a.getItem("MOB_PLAULA"))&&(this.data.MOB_PLAULA=e.filter((function(t){return t.IDF_DISCIPLINA===n.dados.IDF_DISCIPLINA})));case 3:case"end":return t.stop()}}),t,this)})))}}]),t}(),P.\u0275fac=function(t){return new(t||P)(l.Lb(d.a),l.Lb(o.n),l.Lb(i.Fb),l.Lb(i.b),l.Lb(l.h),l.Lb(h.a),l.Lb(f.a),l.Lb(a.a),l.Lb(a.g))},P.\u0275cmp=l.Fb({type:P,selectors:[["app-academico-aula-editar"]],viewQuery:function(t,e){var n;1&t&&l.Gc(i.ob,!0),2&t&&l.qc(n=l.Zb())&&(e.slides=n.first)},decls:28,vars:9,consts:[[3,"titulo","voltar","icone","exibirAvatar"],["pager","true",3,"ionSlideDidChange"],["slides",""],[2,"color","var(--ion-color-primary)"],[4,"ngIf","ngIfElse"],["conteudos",""],[4,"ngIf"],[2,"margin-top","10px"],[1,"w-full",2,"margin","10px 0"],["placeholder","Descreva a metodologia utilizada *","name","assunto",3,"ngModel","ngModelChange"],["placeholder","Descreva a respeito dos recursos","name","assunto",3,"ngModel","ngModelChange"],["vertical","bottom","horizontal","end","slot","fixed"],["color","success",3,"click"],["name","checkmark-circle-outline"],["color","primary",2,"margin-top","50px"],["class","w-full",3,"ngModel","ngModelChange",4,"ngIf"],[1,"w-full",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["lines","none",1,"w-full"],[1,"ion-text-wrap"],["slot","end","name","radio",3,"value"],["bncc",""],["show-clear-button","focus","placeholder","Pesquisar...",3,"ngModel","ngModelChange"],[3,"hidden"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Carregando mais conte\xfado..."],[1,"custom-card"],[2,"padding","0"],["lines","none"],[1,"custom-label"],[2,"font-weight","bold"],["truncatedContent",""],[2,"font-weight","bold","font-size",".8em"],["slot","end",3,"ngModel","ngModelChange","ionChange"],[1,"truncated"]],template:function(t,e){if(1&t&&(l.Mb(0,"cub3-header",0),l.Qb(1,"ion-content"),l.Qb(2,"ion-slides",1,2),l.Yb("ionSlideDidChange",(function(t){return e.onSlideDidChange(t)})),l.Qb(4,"ion-slide"),l.Qb(5,"h2",3),l.Cc(6,"Sele\xe7\xe3o de per\xedodo"),l.Pb(),l.Ac(7,g,2,0,"ng-container",4),l.Ac(8,m,5,1,"ng-template",null,5,l.Bc),l.Pb(),l.Ac(10,D,6,2,"ion-slide",6),l.Qb(11,"ion-slide"),l.Qb(12,"h2",3),l.Cc(13,"Preenchimento do conte\xfado livre"),l.Pb(),l.Qb(14,"small"),l.Cc(15,"Descreva a metodologia, objetos de conhecimento e conte\xfado de forma livre (caso aplic\xe1vel):"),l.Pb(),l.Mb(16,"br"),l.Qb(17,"ion-label",7),l.Cc(18,"Metodologia"),l.Pb(),l.Qb(19,"ion-item",8),l.Qb(20,"ion-textarea",9),l.Yb("ngModelChange",(function(t){return e.dados.DES_ASSUNTO=t})),l.Pb(),l.Pb(),l.Qb(21,"ion-label"),l.Cc(22,"Recursos"),l.Pb(),l.Qb(23,"ion-item",8),l.Qb(24,"ion-textarea",10),l.Yb("ngModelChange",(function(t){return e.dados.OBSERVACAO=t})),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(25,"ion-fab",11),l.Qb(26,"ion-fab-button",12),l.Yb("click",(function(){return e.avancar()})),l.Mb(27,"ion-icon",13),l.Pb(),l.Pb(),l.Pb()),2&t){var n=l.rc(9);l.hc("titulo","Editar <br /> <b>aula</b>")("voltar",!0)("icone","bookmarks-outline")("exibirAvatar",!1),l.zb(7),l.hc("ngIf",e.carregandoConteudos)("ngIfElse",n),l.zb(3),l.hc("ngIf",e.ListarConteudo().length>0),l.zb(10),l.hc("ngModel",e.dados.DES_ASSUNTO),l.zb(4),l.hc("ngModel",e.dados.OBSERVACAO)}},directives:[b.a,i.u,i.ob,i.nb,o.t,i.N,i.H,i.vb,i.Mb,r.j,r.m,i.w,i.x,i.C,i.pb,i.Y,i.Lb,o.s,i.X,i.Jb,i.hb,i.O,i.E,i.F,i.m,i.n,i.s,i.r,i.d],styles:[".custom-card[_ngcontent-%COMP%]{width:100%;background-color:#fff;box-shadow:none}.searchbar-input[_ngcontent-%COMP%]{padding-inline-end:0!important}.truncated[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;display:block;white-space:normal}.custom-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:.5em}.custom-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify;font-size:.8em;line-height:1.6}@media (max-width:600px){.custom-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1em}.custom-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8em}}ion-footer[_ngcontent-%COMP%]:before{display:none;visibility:hidden}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:transparent}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;height:56px;position:relative;display:block;margin:0;border-radius:0;font-weight:700}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button.azul[_ngcontent-%COMP%]{--ion-color-base:#fff!important;--ion-color-contrast:var(--ion-color-azul)!important}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button.rosa[_ngcontent-%COMP%]{--ion-color-base:#fff!important;--ion-color-contrast:var(--ion-color-rosa)!important}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button.verde[_ngcontent-%COMP%]{--ion-color-base:#fff!important;--ion-color-contrast:var(--ion-color-verde)!important}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button.amarelo[_ngcontent-%COMP%]{--ion-color-base:#000!important;--ion-color-contrast:var(--ion-color-amarelo)!important}ion-card[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:0}ion-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], ion-card[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{--background:#fafafa}.btnVoltar[_ngcontent-%COMP%]{position:absolute;top:0;right:5px;font-size:.7em}.listOpcoes[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{width:100%}ion-card[_ngcontent-%COMP%]{background:#fafafa;padding:10px}ion-card[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{float:right}ion-card[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{width:100%}.ativado[_ngcontent-%COMP%]{background:hsla(0,0%,81.6%,.4)!important}ion-label[_ngcontent-%COMP%]{font-weight:700}ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-item[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:100%}ion-slides[_ngcontent-%COMP%]{margin:20px;background:#fafafa;padding:0;border-radius:20px}ion-slides[_ngcontent-%COMP%], ion-slides[_ngcontent-%COMP%]   ion-slide[_ngcontent-%COMP%]{align-items:center;justify-content:center}ion-slides[_ngcontent-%COMP%]   ion-slide[_ngcontent-%COMP%]{width:100%;padding:20px;display:flex;flex-direction:column}"],changeDetection:0}),P)}],E=((w=_createClass((function t(){_classCallCheck(this,t)}))).\u0275mod=l.Jb({type:w}),w.\u0275inj=l.Ib({factory:function(t){return new(t||w)},imports:[[a.k.forChild(M)],a.k]}),w),x=n("HBpY"),k=((S=_createClass((function t(){_classCallCheck(this,t)}))).\u0275mod=l.Jb({type:S}),S.\u0275inj=l.Ib({factory:function(t){return new(t||S)},imports:[[o.c,r.e,x.a,i.Bb,E]]}),S)}}]);