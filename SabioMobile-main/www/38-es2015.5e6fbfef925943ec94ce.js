(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"0vSK":function(t,e,i){"use strict";i.r(e),i.d(e,"AcademicoHorariosPageModule",(function(){return O}));var n=i("ofXK"),o=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),c=i("mrSG"),s=i("fXoL"),l=i("g8ne"),d=i("afdR"),b=i("cI5j");function u(t,e){1&t&&s.Mb(0,"span",12)}const g=function(t,e){return{selected:t,event:e}};function h(t,e){if(1&t){const t=s.Rb();s.Qb(0,"div",8),s.Yb("click",(function(){s.sc(t);const i=e.$implicit;return s.bc().selectDay(i)})),s.Qb(1,"span",9),s.Cc(2),s.Pb(),s.Qb(3,"div",10),s.Qb(4,"span"),s.Cc(5),s.Pb(),s.Ac(6,u,1,0,"span",11),s.Pb(),s.Pb()}if(2&t){const t=e.$implicit,i=s.bc();s.zb(2),s.Dc(t.label),s.zb(1),s.hc("ngClass",s.nc(4,g,i.isSelected(t),t.hasEvent)),s.zb(2),s.Dc(t.date.getDate()),s.zb(1),s.hc("ngIf",t.hasEvent)}}function f(t,e){if(1&t&&(s.Qb(0,"div"),s.Qb(1,"ion-item",14),s.Qb(2,"ion-row",15),s.Qb(3,"ion-col",16),s.Qb(4,"div",17),s.Qb(5,"div",18),s.Cc(6),s.Mb(7,"br"),s.Cc(8),s.Pb(),s.Pb(),s.Pb(),s.Qb(9,"ion-col",19),s.Qb(10,"b"),s.Cc(11),s.Pb(),s.Mb(12,"br"),s.Qb(13,"ion-badge",20),s.Cc(14),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&t){const t=e.$implicit,i=s.bc().$implicit,n=s.bc(3);s.zb(6),s.Ec(" ",n.getHorarioDiscipinaInicio(t.horarios),""),s.zb(2),s.Ec("",n.getHorarioDiscipinaInicio(t.horarios,"fim")," "),s.zb(3),s.Dc(i.titulo),s.zb(3),s.Ec(" ",t.DES_DISCIPLINA," ")}}function m(t,e){if(1&t&&(s.Qb(0,"div"),s.Ac(1,f,15,4,"div",13),s.Pb()),2&t){const t=e.$implicit;s.zb(1),s.hc("ngForOf",t.disciplinas)}}function p(t,e){if(1&t&&(s.Qb(0,"div"),s.Qb(1,"ion-item-divider"),s.Qb(2,"ion-label"),s.Qb(3,"h2"),s.Cc(4),s.Pb(),s.Pb(),s.Pb(),s.Ac(5,m,2,1,"div",13),s.Pb()),2&t){const t=e.$implicit;s.zb(4),s.Dc(t.school),s.zb(1),s.hc("ngForOf",t.turmas)}}function D(t,e){if(1&t&&(s.Ob(0),s.Ac(1,p,6,2,"div",13),s.Nb()),2&t){const t=s.bc();s.zb(1),s.hc("ngForOf",t.filteredTurmasGroupedBySchool)}}function P(t,e){1&t&&(s.Qb(0,"ion-item",21),s.Qb(1,"p",22),s.Cc(2,"Nenhuma aula dispon\xedvel na grade de hor\xe1rios selecionada..."),s.Pb(),s.Pb())}const v=function(t){return{"slide-in":t}},y=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o){this.cub3Db=t,this.cub3Svc=e,this.location=i,this.route=n,this.router=o,this.currentDate=new Date,this.currentDay=this.currentDate.getDay(),this.currentDayDate=this.currentDate.getDate(),this.weekDays=[],this.turmas=[],this.filteredTurmas=[],this.filteredTurmasGroupedBySchool=[],this.animate=!1}ionViewWillEnter(){return Object(c.a)(this,void 0,void 0,(function*(){this.turmas=yield this.cub3Svc.getTurmas(),this.generateWeekDays(),this.diaAtual=this.weekDays.find(t=>t.date.getDate()===this.currentDayDate),this.filterTurmas()}))}ngOnInit(){this.diaAtual=this.weekDays.find(t=>t.date.getDate()===this.currentDayDate),this.filterTurmas()}generateWeekDays(){const t=this.getStartOfWeek(this.currentDate);for(let e=0;e<7;e++){const i=new Date(t);i.setDate(t.getDate()+e),this.weekDays.push({label:this.getDayLabel(e),date:i,hasEvent:this.checkIfDayHasEvent(this.getDayLabel(e))})}}getStartOfWeek(t){const e=t.getDay(),i=t.getDate()-e+(0==e?-6:1);return new Date(t.setDate(i))}getDayLabel(t){return["SEG","TER","QUA","QUI","SEX","SAB","DOM"][t]}checkIfDayHasEvent(t){const e={DOM:"Domingo",SEG:"Segunda",TER:"Ter\xe7a",QUA:"Quarta",QUI:"Quinta",SEX:"Sexta",SAB:"S\xe1bado"}[t];return this.turmas.some(t=>t.dias.includes(e))}selectDay(t){this.diaAtual=t,this.animate=!1,setTimeout(()=>{this.animate=!0,this.filterTurmas()},0)}isSelected(t){return this.diaAtual&&this.diaAtual.date.getDate()===t.date.getDate()}filterTurmas(){if(!this.diaAtual)return;const t={DOM:"Domingo",SEG:"Segunda",TER:"Ter\xe7a",QUA:"Quarta",QUI:"Quinta",SEX:"Sexta",SAB:"S\xe1bado"}[this.diaAtual.label];this.filteredTurmas=this.turmas.filter(e=>e.dias.includes(t)),this.filteredTurmas.sort((t,e)=>{const[i]=t.horario.split(" "),[n]=e.horario.split(" ");return this.convertTimeToMinutes(i)-this.convertTimeToMinutes(n)}),this.groupTurmasBySchool()}convertTimeToMinutes(t){const[e,i]=t.split(":").map(Number);return 60*e+i}getHorarioDiscipinaInicio(t,e="inicio"){const i=this.diaAtual.date.getDay();return(t.find(t=>t.diaId===i)||{})[e]}groupTurmasBySchool(){const t=this.filteredTurmas.reduce((t,e)=>{const i=e.nomeEscola;return t[i]||(t[i]=[]),t[i].push(e),t},{});this.filteredTurmasGroupedBySchool=Object.keys(t).map(e=>({school:e,turmas:t[e]}))}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(l.a),s.Lb(d.a),s.Lb(n.n),s.Lb(r.a),s.Lb(r.g))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-academico-horarios"]],decls:14,vars:10,consts:[[3,"titulo","voltar","icone","exibirAvatar"],["id","container"],[1,"header4"],[1,"week-grid"],[3,"click",4,"ngFor","ngForOf"],[1,"w-full",3,"ngClass"],[4,"ngIf"],["lines","none",4,"ngIf"],[3,"click"],[1,"calendario-label"],[3,"ngClass"],["class","event-dot",4,"ngIf"],[1,"event-dot"],[4,"ngFor","ngForOf"],["lines","full",1,"w-full"],[1,"w-full"],["size","2",1,"time-column"],[2,"background","#eee","border-right","1px solid #ddd","display","flex","justify-content","center","align-items","center","flex-direction","column","background-color","#fff6e8","padding","10px","border-radius","20px"],[2,"font-size","1em"],["size","10",1,"details-column"],["color","secondary",2,"margin-right","5px"],["lines","none"],[2,"text-align","center","width","100%"]],template:function(t,e){1&t&&(s.Mb(0,"cub3-header",0),s.Qb(1,"ion-content"),s.Qb(2,"div",1),s.Qb(3,"ion-row"),s.Qb(4,"ion-col"),s.Qb(5,"h4",2),s.Cc(6,"Lista de "),s.Qb(7,"b"),s.Cc(8,"hor\xe1rios"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(9,"div",3),s.Ac(10,h,7,7,"div",4),s.Pb(),s.Qb(11,"ion-list",5),s.Ac(12,D,2,1,"ng-container",6),s.Ac(13,P,3,0,"ion-item",7),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.hc("titulo","Quadro de<br /> <b>Hor\xe1rios</b>")("voltar",!0)("icone","time-outline")("exibirAvatar",!1),s.zb(10),s.hc("ngForOf",e.weekDays),s.zb(1),s.hc("ngClass",s.mc(8,v,e.animate)),s.zb(1),s.hc("ngIf",e.filteredTurmasGroupedBySchool.length>0),s.zb(1),s.hc("ngIf",0==e.filteredTurmasGroupedBySchool.length))},directives:[b.a,a.u,a.gb,a.t,n.s,a.O,n.q,n.t,a.I,a.N,a.H,a.j],styles:[".week-grid[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px}.week-grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;cursor:pointer;padding:10px;position:relative}.week-grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .calendario-label[_ngcontent-%COMP%]{font-weight:700;font-size:.8em}.week-grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .day-label[_ngcontent-%COMP%]{display:block;font-weight:700}.week-grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]{display:block}.week-grid[_ngcontent-%COMP%]   div.selected[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-radius:50%;min-width:40px}.week-grid[_ngcontent-%COMP%]   div.event[_ngcontent-%COMP%]{position:relative}.week-grid[_ngcontent-%COMP%]   div.event[_ngcontent-%COMP%]   .event-dot[_ngcontent-%COMP%]{position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);width:6px;height:6px;background-color:red;border-radius:50%}ion-item-divider[_ngcontent-%COMP%]{background-color:#f4f4f4}.time-column[_ngcontent-%COMP%]{text-align:center}.details-column[_ngcontent-%COMP%]{display:block}.slide-in[_ngcontent-%COMP%]{animation:slideIn .5s forwards}@keyframes slideIn{0%{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}"]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[r.k.forChild(y)],r.k]}),t})();var C=i("HBpY");let O=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[n.c,o.e,a.Bb,C.a,w]]}),t})()}}]);