<cub3-header [titulo]="'Registro de <br /> <b>nota</b>'" [voltar]="true" [icone]="'bookmarks-outline'" [exibirAvatar]="false"></cub3-header>

<ion-content>
	<ion-row style="padding:0 20px;">
	  <ion-col>
		<h4 class="header4" style='margin:0;padding:0;font-weight:bold;'>{{turmaAtiva.titulo}} - {{turmaAtiva.turno.descricao}}</h4>
		<span [innerHTML]="cub3Svc.normalizeString(turmaAtiva.nomeEscola)" ></span><br />    
    <span [innerHTML]="cub3Svc.normalizeString(aula.titulo)" ></span>    
	  </ion-col>
	</ion-row> 

    <!-- <ion-row>
      <ion-col>
        <h4 class="header4">Seleção da <b>aula</b></h4>
      </ion-col>
    </ion-row>

	<ion-list class="notify-list">
	  <ion-item lines="none">
	    <ion-label>Aula</ion-label>
	    <ion-select [cancelText]="'Cancelar'" placeholder="Selecione uma aula" *ngIf="turma.aulas.length > 0" [(ngModel)]="dados.IDF_AULA" (ionChange)="getAlunos($event)">
	      <ion-select-option  *ngFor="let item of turma.aulas" value="{{item.IDF_AULA}}">{{item.DAT_AULA | amDateFormat: 'DD/MM'}} - {{item.DES_ASSUNTO}}</ion-select-option> 
	    </ion-select>
	  </ion-item>
	</ion-list> -->


	<ion-card *ngIf="!carregando && dados.alunos != undefined && dados.alunos.length > 0 && modoExibicao == 'Lista'">  
	  <ion-card-header>
			  <ion-icon name="ios-people-outline" item-start></ion-icon> 
	    Alunos da turma 
 
	  </ion-card-header>
	  <ion-card-content>
	  	<ion-list class="alunos-lista">
	  		<ion-item lines="none" style="height: 50px;">
	  			<ion-row class="table-header"> 
	  				<ion-col size="8">
	  					<h6><b>Aluno</b></h6>
	  				</ion-col> 
	  				<ion-col size="4">
	  					<h6 style="width:100%;text-align: center;"><b>Nota/conceito</b></h6>
	  				</ion-col>
	  			</ion-row>
	  		</ion-item>
	  		<ng-container *ngIf="dados != null && !carregando">

				<ion-list class="alunos-lista listOpcoes">
					<ng-container *ngFor="let item of dados.alunos; let i = index">
						<ion-item *ngIf="item"  [ngClass]="{'odd': i % 2 == 0}" lines="none">
							<ion-row >
							  <ion-col size="2">
								
								  <ion-avatar>
									<ion-badge color="secondary" style='float:right;font-size:.8em; position:absolute;right:0;bottom:2;'>{{item.id}}</ion-badge>
									<img src="assets/img/avatar-{{item.sexo == 2 ? 'menina' : 'menino'}}.jpg">
								</ion-avatar>
									
							  </ion-col>
							  <ion-col size="6">
								
								<p class="turmaDias" style="position: relative;">
									
									<b style="color:black; 
									white-space: nowrap;
									text-overflow: ellipsis;
									overflow: hidden;
									max-width: 100%;
									display: block;">{{cub3Svc.normalizeString(item.nome)}}</b>
								<small><b>Data de nascimento:</b> {{item.dataNascimento | amDateFormat: 'DD/MM/YYYY'}}</small><br />
								  <small><b>Sexo:</b> {{item.sexo == 1 ? 'Masculino' : 'Feminino'}}</small>
								</p>
							  </ion-col>
							  <ion-col size="4" class="flex" >
                  <ion-input style="background:#ffffff;padding:5px;text-align:center" name="titulo" [(ngModel)]="item.nota" [placeholder]="'Insira um valor'"></ion-input>
							  </ion-col>
							</ion-row>
							</ion-item>
					</ng-container>
			  		
				</ion-list> 

	  		<!-- <ion-item *ngFor="let item of dados.alunos; let i = index" [ngClass]="{'odd': i % 2 == 0}" >
		      <ion-row>  
		        <ion-col size="8">
		           <span class="aluno"><b>{{item.id}}</b> {{item.nome}} </span>
		        </ion-col>
		        <ion-col size="2"  > 
			    		<ion-button size="small" color="danger" fill="{{item.SIT_ALUNO != 'AUSENTE' ? 'outline' : 'solid'}}"  (click)="item.SIT_ALUNO = 'AUSENTE'" class="btnFrequencia btnAusente"><ion-icon name="close-circle-outline"></ion-icon> </ion-button>	 
		        </ion-col>
		        <ion-col size="2" >
    					<ion-button size="small" color="primary" fill="{{item.SIT_ALUNO != 'PRESENTE' ? 'outline' : 'solid'}}" (click)="item.SIT_ALUNO = 'PRESENTE'" class="btnFrequencia btnPresente"><ion-icon name="checkmark-circle-outline"></ion-icon> </ion-button>		        	
		        </ion-col>
		      </ion-row>
	  		</ion-item> -->
	  	</ng-container>
      			<ion-spinner name="crescent" class="carregando" color="primary" *ngIf="carregando != undefined && carregando == true"></ion-spinner>
		</ion-list>
	  </ion-card-content>
	</ion-card>

	<!-- Modo Slides -->
<ion-slides   *ngIf="!carregando && dados.alunos != undefined && dados.alunos.length > 0 && modoExibicao == 'Slides'"> 
  <ion-slide *ngFor="let item of dados.alunos; let i = index">
	<ion-avatar>
	  <img src="assets/img/avatar-{{item.sexo == 2 ? 'menina' : 'menino'}}.jpg">
  </ion-avatar>
    <h2><b>{{item.id}}</b> <br /> {{cub3Svc.normalizeString(item.nome)}}</h2>
	<!-- <small><b>Data de nascimento:</b><br /> {{item.dataNascimento | amDateFormat: 'DD/MM/YYYY'}}</small><br />
	  <small><b>Sexo:</b><br /> {{item.sexo == 1 ? 'Masculino' : 'Feminino'}}</small>
	 -->
    <ion-row> 
    	<ion-col>
    		<!-- 	 -->

		  		<ion-list style="width:100%;padding:20px"> 
            <ion-title color="primary"><ion-icon name="book-outline"></ion-icon> Nota/conceito</ion-title> 
            <ion-item class="box-conteudo">
              <ion-input name="titulo" [(ngModel)]="item.nota" [placeholder]="'Insira um valor'"></ion-input>
                <!-- <editor no-blur [(ngModel)]="dados.descricao" [init]="editorOptions" ></editor> -->
              </ion-item> 
              <ion-button style="margin:auto;width:100%;margin-top:10px;" ion-button color="primary" fill="{{item.nota ? 'outline' : 'solid'}}" (click)="avancar(i)" class="btnFrequencia btnPresente"> <span style="font-size:.8em !important">Avançar</span></ion-button>
          </ion-list>
    	</ion-col>
    </ion-row> 

  </ion-slide> 
</ion-slides>
</ion-content>
<ion-footer *ngIf="dados != null && dados.alunos != undefined">
	<ion-row >
		<ion-col *ngIf="modoExibicao == 'Slides'"  >
			<b color="secondary">{{dados.alunos.length}}</b> alunos na turma
		</ion-col>
		<ion-col >
			<ion-button   color="primary" *ngIf="modoExibicao == 'Lista'"  style="float:right;" (click)="finalizarChamada()">Finalizar lançamento</ion-button>
			<ion-button  color="danger"  style="float:right;" (click)="revisarChamada()">Revisar lançamento</ion-button>
		</ion-col>
	</ion-row>
</ion-footer>
